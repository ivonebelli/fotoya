<!DOCTYPE html>
<html lang="es-ES">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tienda - Foto Ya! - Mar del Plata</title>
    <meta name="description" content="Tienda online de Foto Ya! - Productos fotográficos personalizados en Mar del Plata.">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&family=Playfair+Display:wght@400;500;600;700&family=Montserrat:wght@300;400;500&display=swap" rel="stylesheet">
    <style>
        :root {
            --primary-color: #8C6C9C;
            --primary-dark: #6a4d7a;
            --secondary-color: #b18aa2;
            --accent-color: #e2a865;
            --light-color: #f9f5f0;
            --dark-color: #2a2a2a;
            --white: #ffffff;
            --black: #000000;
            --gray-light: #f5f5f5;
            --gray-medium: #e0e0e0;
            --gray-dark: #777777;
            --overlay-color: rgba(42, 42, 42, 0.7);
        }
        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }
        body {
            font-family: 'Poppins', sans-serif;
            font-size: 16px;
            font-weight: 400;
            line-height: 1.7;
            color: var(--dark-color);
            background-color: var(--white);
            background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='80' height='80' viewBox='0 0 100 100'%3E%3Cpath d='M70 35H55l-5-10H40l-5 10H30c-5.5 0-10 4.5-10 10v30c0 5.5 4.5 10 10 10h40c5.5 0 10-4.5 10-10V45c0-5.5-4.5-10-10-10zm-20 35c-8.3 0-15-6.7-15-15s6.7-15 15-15 15 6.7 15 15-6.7 15-15 15z' fill='%238C6C9C' fill-opacity='0.05'/%3E%3C/svg%3E");
            -webkit-font-smoothing: antialiased;
            overflow-x: hidden;
        }
        h1, h2, h3, h4, h5, h6 {
            font-family: 'Playfair Display', serif;
            font-weight: 600;
            margin-top: 0;
            line-height: 1.3;
            letter-spacing: 0.5px;
        }
        a {
            color: var(--primary-color);
            text-decoration: none;
            transition: all 0.3s ease;
        }
        a:hover {
            color: var(--secondary-color);
        }
        img {
            max-width: 100%;
            height: auto;
            display: block;
        }
        
        /* Header */
        #header {
            background: var(--white);
            position: fixed;
            top: 0;
            width: 100%;
            z-index: 1000;
            padding: 15px 0;
            box-shadow: 0 2px 10px rgba(0,0,0,0.05);
            transition: all 0.4s ease;
        }
        
        #header.scrolled {
            padding: 10px 0;
            background-color: rgba(255,255,255,0.98);
            box-shadow: 0 5px 20px rgba(0,0,0,0.1);
        }
        
        .header-inner {
            max-width: 1200px;
            margin: 0 auto;
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 0 30px;
        }
        
        #logo img {
            height: 40px;
            width: auto;
            transition: all 0.3s ease;
        }
        
        .tt-menu-nav {
            display: flex;
            list-style: none;
            margin: 0;
            padding: 0;
        }
        
        .tt-menu-nav li {
            margin-left: 35px;
            position: relative;
        }
        
        .tt-menu-nav li a {
            color: var(--primary-color);
            text-decoration: none;
            font-weight: 500;
            font-size: 14px;
            letter-spacing: 1px;
            text-transform: uppercase;
            padding: 5px 0;
            position: relative;
        }
        
        .tt-menu-nav li a:before {
            content: '';
            position: absolute;
            width: 0;
            height: 2px;
            bottom: 0;
            left: 0;
            background-color: var(--primary-color);
            transition: width 0.4s cubic-bezier(0.215, 0.61, 0.355, 1);
        }
        
        .tt-menu-nav li a:hover:before {
            width: 100%;
        }

        #page-header {
            margin-top: 70px;
            padding: 40px 0;
            text-align: center;
        }
        .page-header-inner {
            max-width: 900px;
            margin: 0 auto;
            padding: 0 20px;
        }
        .page-header-title {
            font-size: 2.5em;
            margin-bottom: 10px;
            color: var(--primary-color);
        }
        .hr-short {
            border-top: 2px solid var(--primary-color);
            width: 70px;
            margin: 15px auto;
            border-bottom: none;
        }
        .page-header-description {
            margin: 0 auto 20px;
            font-size: 1.1em;
            max-width: 700px;
        }
        
        /* Estilos para la tienda */
        #tienda-container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }
        
        .category-section {
            margin-bottom: 50px;
        }
        
        .category-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            padding-bottom: 10px;
            border-bottom: 1px solid var(--gray-medium);
        }
        
        .category-title {
            font-size: 1.8em;
            color: var(--primary-dark);
        }
        
        .edit-category-btn {
            background: var(--primary-color);
            color: white;
            border: none;
            padding: 5px 15px;
            border-radius: 4px;
            cursor: pointer;
            font-size: 0.9em;
            transition: background 0.3s;
        }
        
        .edit-category-btn:hover {
            background: var(--primary-dark);
        }
        
        .products-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
            gap: 25px;
        }
        
        .product-card {
            background: white;
            border-radius: 8px;
            overflow: hidden;
            box-shadow: 0 5px 15px rgba(0,0,0,0.08);
            transition: transform 0.3s, box-shadow 0.3s;
        }
        
        .product-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 25px rgba(0,0,0,0.12);
        }
        
        .product-image {
            height: 200px;
            width: 100%;
            object-fit: cover;
        }
        
        .product-info {
            padding: 15px;
        }
        
        .product-name {
            font-size: 1.2em;
            margin-bottom: 8px;
            color: var(--dark-color);
        }
        
        .product-price {
            font-weight: 600;
            color: var(--primary-dark);
            margin-bottom: 12px;
            font-size: 1.1em;
        }
        
        .product-description {
            color: var(--gray-dark);
            font-size: 0.9em;
            margin-bottom: 15px;
            height: 60px;
            overflow: hidden;
            text-overflow: ellipsis;
        }
        
        .product-actions {
            display: flex;
            justify-content: space-between;
        }
        
        .add-to-cart, .details-btn {
            padding: 8px 15px;
            border-radius: 4px;
            font-size: 0.9em;
            cursor: pointer;
            transition: all 0.3s;
        }
        
        .add-to-cart {
            background: var(--primary-color);
            color: white;
            border: none;
            display: flex;
            align-items: center;
        }
        
        .add-to-cart:hover {
            background: var(--primary-dark);
        }
        
        .details-btn {
            background: white;
            color: var(--primary-color);
            border: 1px solid var(--primary-color);
        }
        
        .details-btn:hover {
            background: var(--light-color);
        }
        
        .cart-icon {
            margin-right: 5px;
        }
        
        /* Modal para editar categorías */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0,0,0,0.5);
            z-index: 1001;
            justify-content: center;
            align-items: center;
        }
        
        .modal-content {
            background: white;
            padding: 25px;
            border-radius: 8px;
            width: 90%;
            max-width: 500px;
            box-shadow: 0 5px 20px rgba(0,0,0,0.2);
        }
        
        .modal-title {
            margin-bottom: 20px;
            color: var(--primary-dark);
        }
        
        .form-group {
            margin-bottom: 15px;
        }
        
        .form-group label {
            display: block;
            margin-bottom: 5px;
            font-weight: 500;
        }
        
        .form-control {
            width: 100%;
            padding: 10px;
            border: 1px solid var(--gray-medium);
            border-radius: 4px;
            font-family: inherit;
        }
        
        .modal-actions {
            display: flex;
            justify-content: flex-end;
            margin-top: 20px;
        }
        
        .btn {
            padding: 8px 20px;
            border-radius: 4px;
            cursor: pointer;
            margin-left: 10px;
            font-weight: 500;
        }
        
        .btn-cancel {
            background: var(--gray-light);
            color: var(--dark-color);
            border: 1px solid var(--gray-medium);
        }
        
        .btn-save {
            background: var(--primary-color);
            color: white;
            border: none;
        }
        
        .btn-save:hover {
            background: var(--primary-dark);
        }
        
        /* Modal para agregar/editar productos */
        .product-modal-content {
            max-width: 600px;
        }
        
        .product-image-preview {
            max-height: 200px;
            margin: 10px 0;
            display: none;
        }
        
        /* Botón para agregar productos */
        .add-product-btn {
            display: block;
            width: 100%;
            padding: 10px;
            background: var(--accent-color);
            color: white;
            border: none;
            border-radius: 4px;
            margin-top: 15px;
            cursor: pointer;
            font-weight: 500;
            transition: background 0.3s;
        }
        
        .add-product-btn:hover {
            background: #d89a50;
        }
        
        /* Botón para agregar categorías */
        .add-category-btn {
            display: block;
            width: 100%;
            padding: 12px;
            background: var(--secondary-color);
            color: white;
            border: none;
            border-radius: 4px;
            margin: 30px 0;
            cursor: pointer;
            font-weight: 500;
            font-size: 1em;
            transition: background 0.3s;
        }
        
        .add-category-btn:hover {
            background: #9f7991;
        }
        
        /* Carrito de compras */
        .cart-sidebar {
            position: fixed;
            top: 0;
            right: -400px;
            width: 400px;
            height: 100%;
            background: white;
            box-shadow: -5px 0 15px rgba(0,0,0,0.1);
            z-index: 1002;
            transition: right 0.3s;
            padding: 20px;
            overflow-y: auto;
        }
        
        .cart-sidebar.open {
            right: 0;
        }
        
        .cart-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            padding-bottom: 10px;
            border-bottom: 1px solid var(--gray-medium);
        }
        
        .cart-title {
            font-size: 1.5em;
            color: var(--primary-dark);
        }
        
        .close-cart {
            background: none;
            border: none;
            font-size: 1.5em;
            cursor: pointer;
            color: var(--gray-dark);
        }
        
        .cart-items {
            margin-bottom: 20px;
        }
        
        .cart-item {
            display: flex;
            margin-bottom: 15px;
            padding-bottom: 15px;
            border-bottom: 1px solid var(--gray-light);
        }
        
        .cart-item-image {
            width: 80px;
            height: 80px;
            object-fit: cover;
            border-radius: 4px;
            margin-right: 15px;
        }
        
        .cart-item-details {
            flex: 1;
        }
        
        .cart-item-name {
            font-weight: 500;
            margin-bottom: 5px;
        }
        
        .cart-item-price {
            color: var(--primary-dark);
            font-weight: 600;
            margin-bottom: 5px;
        }
        
        .cart-item-remove {
            color: var(--gray-dark);
            font-size: 0.9em;
            cursor: pointer;
        }
        
        .cart-total {
            font-weight: 600;
            font-size: 1.2em;
            text-align: right;
            margin: 20px 0;
        }
        
        .checkout-btn {
            display: block;
            width: 100%;
            padding: 12px;
            background: var(--primary-color);
            color: white;
            border: none;
            border-radius: 4px;
            font-weight: 500;
            cursor: pointer;
            transition: background 0.3s;
        }
        
        .checkout-btn:hover {
            background: var(--primary-dark);
        }
        
        /* Botón del carrito */
        .cart-button {
            position: fixed;
            bottom: 90px;
            right: 30px;
            background: var(--primary-color);
            color: white;
            width: 60px;
            height: 60px;
            border-radius: 50%;
            display: flex;
            justify-content: center;
            align-items: center;
            font-size: 1.5em;
            box-shadow: 0 4px 15px rgba(140, 108, 156, 0.3);
            cursor: pointer;
            z-index: 1000;
        }
        
        .cart-count {
            position: absolute;
            top: -5px;
            right: -5px;
            background: var(--accent-color);
            color: white;
            width: 25px;
            height: 25px;
            border-radius: 50%;
            display: flex;
            justify-content: center;
            align-items: center;
            font-size: 0.7em;
            font-weight: 600;
        }
        
        /* Footer */
        #footer {
            background-color: var(--dark-color);
            color: var(--white);
            padding: 40px 0 20px;
            text-align: center;
        }
        .footer-container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 20px;
        }
        .social-buttons {
            margin-bottom: 30px;
        }
        .social-buttons a {
            color: var(--white);
            font-size: 1.2em;
            margin: 0 10px;
            width: 40px;
            height: 40px;
            line-height: 40px;
            border-radius: 50%;
            background-color: rgba(255,255,255,0.1);
        }
        .social-buttons a:hover {
            background-color: var(--primary-color);
        }
        .footer-copyright {
            margin-top: 20px;
            font-size: 0.85em;
            color: rgba(255,255,255,0.5);
        }
        .whatsapp-float {
            position: fixed;
            bottom: 30px;
            right: 30px;
            background: #25D366;
            color: var(--white);
            width: 50px;
            height: 50px;
            border-radius: 50%;
            display: flex;
            justify-content: center;
            align-items: center;
            font-size: 25px;
            box-shadow: 0 4px 15px rgba(37, 211, 102, 0.3);
            z-index: 1000;
        }
        #mobile-menu-toggle {
            display: none;
            font-size: 1.5em;
            cursor: pointer;
            z-index: 1001;
            color: var(--primary-color);
        }
        
        @media (max-width: 768px) {
            #header {
                padding: 10px 0;
            }
            
            #header.scrolled {
                padding: 8px 0;
            }
            
            #logo img {
                height: 35px;
            }
            
            .tt-menu-nav {
                display: none;
                position: fixed;
                top: 70px;
                left: 0;
                right: 0;
                background: var(--white);
                flex-direction: column;
                padding: 20px;
                box-shadow: 0 10px 20px rgba(0,0,0,0.1);
            }
            
            .tt-menu-nav.show {
                display: flex;
            }
            
            .tt-menu-nav li {
                margin: 15px 0;
                margin-left: 0;
            }
            
            .tt-menu-nav li a {
                color: var(--primary-color);
            }
            
            #mobile-menu-toggle {
                display: block !important;
            }
            
            .page-header-title {
                font-size: 2em;
            }
            
            .products-grid {
                grid-template-columns: 1fr;
            }
            
            .cart-sidebar {
                width: 100%;
                right: -100%;
            }
            
            .cart-sidebar.open {
                right: 0;
            }
            
            .cart-button {
                bottom: 80px;
                right: 20px;
                width: 50px;
                height: 50px;
                font-size: 1.2em;
            }
            
            .whatsapp-float {
                bottom: 20px;
                right: 20px;
            }
        }
    </style>
</head>
<body>
    <header id="header">
        <div class="header-inner">
            <div id="logo">
                <img src="https://i.ibb.co/C3HF56sz/logo-foto-ya.png" alt="Foto Ya! - Mar del Plata">
            </div>
            
            <nav class="tt-main-menu">
                <ul class="tt-menu-nav" id="main-menu">
                    <li><a href="index.html">INICIO</a></li>
                    <li><a href="quienes-somos.html">QUIENES SOMOS</a></li>
                    <li><a href="trabajos.html">TRABAJOS</a></li>
                    <li><a href="tienda.html">TIENDA</a></li>
                    <li><a href="contacto.html">CONTACTO</a></li>
                </ul>
            </nav>

            <div id="mobile-menu-toggle">
                <i class="fa fa-bars"></i>
            </div>
        </div>
    </header>

    <section id="page-header">
        <div class="page-header-inner">
            <h1 class="page-header-title">Nuestra Tienda</h1>
            <hr class="hr-short">
            <p class="page-header-description">
                Descubre nuestros productos fotográficos personalizados y lleva tus recuerdos a otro nivel.
            </p>
        </div>
    </section>

    <div id="tienda-container">
        <!-- Las categorías y productos se generarán dinámicamente con JavaScript -->
    </div>

    <button class="add-category-btn" id="addCategoryBtn">
        <i class="fa fa-plus"></i> Agregar Nueva Categoría
    </button>

    <!-- Botón del carrito -->
    <div class="cart-button" id="cartButton">
        <i class="fa fa-shopping-cart"></i>
        <div class="cart-count" id="cartCount">0</div>
    </div>

    <!-- Sidebar del carrito -->
    <div class="cart-sidebar" id="cartSidebar">
        <div class="cart-header">
            <h3 class="cart-title">Tu Carrito</h3>
            <button class="close-cart" id="closeCart">&times;</button>
        </div>
        <div class="cart-items" id="cartItems">
            <!-- Los items del carrito se agregarán aquí dinámicamente -->
            <p class="empty-cart-message">Tu carrito está vacío</p>
        </div>
        <div class="cart-total" id="cartTotal">
            Total: $0
        </div>
        <button class="checkout-btn" id="checkoutBtn">Finalizar Compra</button>
    </div>

    <!-- Modal para editar categorías -->
    <div class="modal" id="categoryModal">
        <div class="modal-content">
            <h3 class="modal-title" id="categoryModalTitle">Editar Categoría</h3>
            <div class="form-group">
                <label for="categoryName">Nombre de la categoría</label>
                <input type="text" id="categoryName" class="form-control" placeholder="Ej: Cuadros Personalizados">
            </div>
            <div class="modal-actions">
                <button class="btn btn-cancel" id="cancelCategoryBtn">Cancelar</button>
                <button class="btn btn-save" id="saveCategoryBtn">Guardar</button>
            </div>
        </div>
    </div>

    <!-- Modal para agregar/editar productos -->
    <div class="modal" id="productModal">
        <div class="modal-content product-modal-content">
            <h3 class="modal-title" id="productModalTitle">Agregar Producto</h3>
            <div class="form-group">
                <label for="productName">Nombre del producto</label>
                <input type="text" id="productName" class="form-control" placeholder="Ej: Cuadro 20x30 cm">
            </div>
            <div class="form-group">
                <label for="productPrice">Precio ($)</label>
                <input type="number" id="productPrice" class="form-control" placeholder="Ej: 1500" min="0">
            </div>
            <div class="form-group">
                <label for="productDescription">Descripción</label>
                <textarea id="productDescription" class="form-control" rows="3" placeholder="Descripción del producto"></textarea>
            </div>
            <div class="form-group">
                <label for="productImage">Imagen del producto</label>
                <input type="file" id="productImage" class="form-control" accept="image/*">
                <img id="productImagePreview" class="product-image-preview" alt="Vista previa de la imagen">
            </div>
            <div class="modal-actions">
                <button class="btn btn-cancel" id="cancelProductBtn">Cancelar</button>
                <button class="btn btn-save" id="saveProductBtn">Guardar</button>
            </div>
        </div>
    </div>

    <footer id="footer">
        <div class="footer-container">
            <div class="social-buttons">
                <a href="https://www.facebook.com/profile.php?id=100090358743609" target="_blank"><i class="fa fa-facebook"></i></a>
                <a href="https://instagram.com/fotoya_impresiones" target="_blank"><i class="fa fa-instagram"></i></a>
                <a href="mailto:fotoya.mardelplata@gmail.com"><i class="fa fa-envelope"></i></a>
            </div>
            <div class="footer-copyright">
                <p>© FOTO YA! / Todos los Derechos Reservados.</p>
            </div>
        </div>
    </footer>

    <a href="https://wa.me/5492236948462" class="whatsapp-float">
        <i class="fa fa-whatsapp"></i>
    </a>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // Variables globales
            let categories = JSON.parse(localStorage.getItem('tiendaCategories')) || [
                {
                    id: 1,
                    name: 'Cuadros Personalizados',
                    products: [
                        {
                            id: 1,
                            name: 'Cuadro 20x30 cm',
                            price: 2500,
                            description: 'Cuadro de madera con impresión de alta calidad',
                            image: 'https://images.unsplash.com/photo-1616486338812-3dadae4b4ace?ixlib=rb-1.2.1&auto=format&fit=crop&w=500&q=80'
                        },
                        {
                            id: 2,
                            name: 'Cuadro 30x40 cm',
                            price: 3500,
                            description: 'Cuadro moderno con marco de aluminio',
                            image: 'https://images.unsplash.com/photo-1571896349842-33c89424de2d?ixlib=rb-1.2.1&auto=format&fit=crop&w=500&q=80'
                        }
                    ]
                },
                {
                    id: 2,
                    name: 'Tazas Personalizadas',
                    products: [
                        {
                            id: 3,
                            name: 'Taza Clásica',
                            price: 1200,
                            description: 'Taza de cerámica con impresión a todo color',
                            image: 'https://images.unsplash.com/photo-1578849278619-e73505e9610f?ixlib=rb-1.2.1&auto=format&fit=crop&w=500&q=80'
                        }
                    ]
                }
            ];
            
            let cart = JSON.parse(localStorage.getItem('tiendaCart')) || [];
            let currentCategoryId = null;
            let currentProductId = null;
            let isEditing = false;
            
            // Elementos del DOM
            const tiendaContainer = document.getElementById('tienda-container');
            const addCategoryBtn = document.getElementById('addCategoryBtn');
            const categoryModal = document.getElementById('categoryModal');
            const categoryModalTitle = document.getElementById('categoryModalTitle');
            const categoryNameInput = document.getElementById('categoryName');
            const saveCategoryBtn = document.getElementById('saveCategoryBtn');
            const cancelCategoryBtn = document.getElementById('cancelCategoryBtn');
            
            const productModal = document.getElementById('productModal');
            const productModalTitle = document.getElementById('productModalTitle');
            const productNameInput = document.getElementById('productName');
            const productPriceInput = document.getElementById('productPrice');
            const productDescriptionInput = document.getElementById('productDescription');
            const productImageInput = document.getElementById('productImage');
            const productImagePreview = document.getElementById('productImagePreview');
            const saveProductBtn = document.getElementById('saveProductBtn');
            const cancelProductBtn = document.getElementById('cancelProductBtn');
            
            const cartButton = document.getElementById('cartButton');
            const cartSidebar = document.getElementById('cartSidebar');
            const closeCart = document.getElementById('closeCart');
            const cartItemsContainer = document.getElementById('cartItems');
            const cartCount = document.getElementById('cartCount');
            const cartTotal = document.getElementById('cartTotal');
            const checkoutBtn = document.getElementById('checkoutBtn');
            
            // Funciones de utilidad
            function generateId() {
                return Date.now();
            }
            
            function saveData() {
                localStorage.setItem('tiendaCategories', JSON.stringify(categories));
                localStorage.setItem('tiendaCart', JSON.stringify(cart));
                updateCartCount();
            }
            
            function updateCartCount() {
                const totalItems = cart.reduce((total, item) => total + item.quantity, 0);
                cartCount.textContent = totalItems;
            }
            
            // Funciones para renderizar
            function renderTienda() {
                tiendaContainer.innerHTML = '';
                
                if (categories.length === 0) {
                    tiendaContainer.innerHTML = '<p style="text-align: center; margin: 50px 0;">No hay categorías aún. Agrega una categoría para comenzar.</p>';
                    return;
                }
                
                categories.forEach(category => {
                    const categorySection = document.createElement('div');
                    categorySection.className = 'category-section';
                    categorySection.dataset.categoryId = category.id;
                    
                    const categoryHeader = document.createElement('div');
                    categoryHeader.className = 'category-header';
                    
                    const categoryTitle = document.createElement('h2');
                    categoryTitle.className = 'category-title';
                    categoryTitle.textContent = category.name;
                    
                    const editCategoryBtn = document.createElement('button');
                    editCategoryBtn.className = 'edit-category-btn';
                    editCategoryBtn.innerHTML = '<i class="fa fa-edit"></i> Editar';
                    editCategoryBtn.addEventListener('click', () => openCategoryModal(category.id));
                    
                    categoryHeader.appendChild(categoryTitle);
                    categoryHeader.appendChild(editCategoryBtn);
                    
                    const productsGrid = document.createElement('div');
                    productsGrid.className = 'products-grid';
                    
                    // Agregar botón para añadir producto
                    const addProductBtn = document.createElement('button');
                    addProductBtn.className = 'add-product-btn';
                    addProductBtn.innerHTML = '<i class="fa fa-plus"></i> Agregar Producto';
                    addProductBtn.addEventListener('click', () => openProductModal(category.id));
                    
                    if (category.products.length === 0) {
                        productsGrid.innerHTML = '<p style="grid-column: 1 / -1; text-align: center; padding: 20px;">No hay productos en esta categoría.</p>';
                    } else {
                        category.products.forEach(product => {
                            const productCard = document.createElement('div');
                            productCard.className = 'product-card';
                            
                            const productImage = document.createElement('img');
                            productImage.className = 'product-image';
                            productImage.src = product.image;
                            productImage.alt = product.name;
                            
                            const productInfo = document.createElement('div');
                            productInfo.className = 'product-info';
                            
                            const productName = document.createElement('h3');
                            productName.className = 'product-name';
                            productName.textContent = product.name;
                            
                            const productPrice = document.createElement('div');
                            productPrice.className = 'product-price';
                            productPrice.textContent = `$${product.price.toLocaleString()}`;
                            
                            const productDescription = document.createElement('p');
                            productDescription.className = 'product-description';
                            productDescription.textContent = product.description;
                            
                            const productActions = document.createElement('div');
                            productActions.className = 'product-actions';
                            
                            const addToCartBtn = document.createElement('button');
                            addToCartBtn.className = 'add-to-cart';
                            addToCartBtn.innerHTML = '<i class="fa fa-shopping-cart cart-icon"></i> Agregar';
                            addToCartBtn.addEventListener('click', () => addToCart(product));
                            
                            const detailsBtn = document.createElement('button');
                            detailsBtn.className = 'details-btn';
                            detailsBtn.innerHTML = '<i class="fa fa-info-circle"></i> Detalles';
                            detailsBtn.addEventListener('click', () => alert(`Detalles de ${product.name}\n\n${product.description}\n\nPrecio: $${product.price}`));
                            
                            const editProductBtn = document.createElement('button');
                            editProductBtn.className = 'details-btn';
                            editProductBtn.innerHTML = '<i class="fa fa-edit"></i> Editar';
                            editProductBtn.style.marginTop = '8px';
                            editProductBtn.style.width = '100%';
                            editProductBtn.addEventListener('click', () => openProductModal(category.id, product.id));
                            
                            productActions.appendChild(addToCartBtn);
                            productActions.appendChild(detailsBtn);
                            
                            productInfo.appendChild(productName);
                            productInfo.appendChild(productPrice);
                            productInfo.appendChild(productDescription);
                            productInfo.appendChild(productActions);
                            productInfo.appendChild(editProductBtn);
                            
                            productCard.appendChild(productImage);
                            productCard.appendChild(productInfo);
                            
                            productsGrid.appendChild(productCard);
                        });
                    }
                    
                    categorySection.appendChild(categoryHeader);
                    categorySection.appendChild(productsGrid);
                    categorySection.appendChild(addProductBtn);
                    
                    tiendaContainer.appendChild(categorySection);
                });
            }
            
            function renderCart() {
                cartItemsContainer.innerHTML = '';
                
                if (cart.length === 0) {
                    cartItemsContainer.innerHTML = '<p class="empty-cart-message">Tu carrito está vacío</p>';
                    cartTotal.textContent = 'Total: $0';
                    return;
                }
                
                let total = 0;
                
                cart.forEach(item => {
                    total += item.price * item.quantity;
                    
                    const cartItem = document.createElement('div');
                    cartItem.className = 'cart-item';
                    
                    const cartItemImage = document.createElement('img');
                    cartItemImage.className = 'cart-item-image';
                    cartItemImage.src = item.image;
                    cartItemImage.alt = item.name;
                    
                    const cartItemDetails = document.createElement('div');
                    cartItemDetails.className = 'cart-item-details';
                    
                    const cartItemName = document.createElement('div');
                    cartItemName.className = 'cart-item-name';
                    cartItemName.textContent = item.name;
                    
                    const cartItemPrice = document.createElement('div');
                    cartItemPrice.className = 'cart-item-price';
                    cartItemPrice.textContent = `$${(item.price * item.quantity).toLocaleString()}`;
                    
                    const cartItemQuantity = document.createElement('div');
                    cartItemQuantity.textContent = `Cantidad: ${item.quantity}`;
                    
                    const cartItemRemove = document.createElement('div');
                    cartItemRemove.className = 'cart-item-remove';
                    cartItemRemove.innerHTML = '<i class="fa fa-trash"></i> Eliminar';
                    cartItemRemove.addEventListener('click', () => removeFromCart(item.id));
                    
                    cartItemDetails.appendChild(cartItemName);
                    cartItemDetails.appendChild(cartItemPrice);
                    cartItemDetails.appendChild(cartItemQuantity);
                    cartItemDetails.appendChild(cartItemRemove);
                    
                    cartItem.appendChild(cartItemImage);
                    cartItem.appendChild(cartItemDetails);
                    
                    cartItemsContainer.appendChild(cartItem);
                });
                
                cartTotal.textContent = `Total: $${total.toLocaleString()}`;
            }
            
            // Funciones para manejar categorías
            function openCategoryModal(categoryId = null) {
                isEditing = categoryId !== null;
                currentCategoryId = categoryId;
                
                if (isEditing) {
                    categoryModalTitle.textContent = 'Editar Categoría';
                    const category = categories.find(c => c.id === categoryId);
                    categoryNameInput.value = category.name;
                } else {
                    categoryModalTitle.textContent = 'Agregar Categoría';
                    categoryNameInput.value = '';
                }
                
                categoryModal.style.display = 'flex';
            }
            
            function saveCategory() {
                const name = categoryNameInput.value.trim();
                
                if (!name) {
                    alert('Por favor ingresa un nombre para la categoría');
                    return;
                }
                
                if (isEditing) {
                    // Editar categoría existente
                    const categoryIndex = categories.findIndex(c => c.id === currentCategoryId);
                    if (categoryIndex !== -1) {
                        categories[categoryIndex].name = name;
                    }
                } else {
                    // Agregar nueva categoría
                    const newCategory = {
                        id: generateId(),
                        name: name,
                        products: []
                    };
                    categories.push(newCategory);
                }
                
                saveData();
                renderTienda();
                closeModal(categoryModal);
            }
            
            // Funciones para manejar productos
            function openProductModal(categoryId, productId = null) {
                isEditing = productId !== null;
                currentCategoryId = categoryId;
                currentProductId = productId;
                
                if (isEditing) {
                    productModalTitle.textContent = 'Editar Producto';
                    const category = categories.find(c => c.id === categoryId);
                    if (category) {
                        const product = category.products.find(p => p.id === productId);
                        if (product) {
                            productNameInput.value = product.name;
                            productPriceInput.value = product.price;
                            productDescriptionInput.value = product.description;
                            productImagePreview.src = product.image;
                            productImagePreview.style.display = 'block';
                        }
                    }
                } else {
                    productModalTitle.textContent = 'Agregar Producto';
                    productNameInput.value = '';
                    productPriceInput.value = '';
                    productDescriptionInput.value = '';
                    productImagePreview.style.display = 'none';
                    productImageInput.value = '';
                }
                
                productModal.style.display = 'flex';
            }
            
            function saveProduct() {
                const name = productNameInput.value.trim();
                const price = parseFloat(productPriceInput.value);
                const description = productDescriptionInput.value.trim();
                const image = productImagePreview.src || 'https://via.placeholder.com/300x200?text=Sin+imagen';
                
                if (!name) {
                    alert('Por favor ingresa un nombre para el producto');
                    return;
                }
                
                if (isNaN(price)) {
                    alert('Por favor ingresa un precio válido');
                    return;
                }
                
                const categoryIndex = categories.findIndex(c => c.id === currentCategoryId);
                if (categoryIndex === -1) return;
                
                if (isEditing) {
                    // Editar producto existente
                    const productIndex = categories[categoryIndex].products.findIndex(p => p.id === currentProductId);
                    if (productIndex !== -1) {
                        categories[categoryIndex].products[productIndex] = {
                            id: currentProductId,
                            name,
                            price,
                            description,
                            image
                        };
                    }
                } else {
                    // Agregar nuevo producto
                    const newProduct = {
                        id: generateId(),
                        name,
                        price,
                        description,
                        image
                    };
                    categories[categoryIndex].products.push(newProduct);
                }
                
                saveData();
                renderTienda();
                closeModal(productModal);
            }
            
            // Funciones para manejar el carrito
            function addToCart(product) {
                const existingItem = cart.find(item => item.id === product.id);
                
                if (existingItem) {
                    existingItem.quantity += 1;
                } else {
                    cart.push({
                        ...product,
                        quantity: 1
                    });
                }
                
                saveData();
                renderCart();
                showCartNotification(product.name);
            }
            
            function removeFromCart(productId) {
                cart = cart.filter(item => item.id !== productId);
                saveData();
                renderCart();
            }
            
            function showCartNotification(productName) {
                const notification = document.createElement('div');
                notification.style.position = 'fixed';
                notification.style.bottom = '100px';
                notification.style.right = '30px';
                notification.style.backgroundColor = 'var(--primary-color)';
                notification.style.color = 'white';
                notification.style.padding = '10px 20px';
                notification.style.borderRadius = '4px';
                notification.style.boxShadow = '0 2px 10px rgba(0,0,0,0.2)';
                notification.style.zIndex = '1000';
                notification.style.animation = 'fadeInOut 3s ease-in-out';
                notification.textContent = `¡${productName} agregado al carrito!`;
                
                document.body.appendChild(notification);
                
                setTimeout(() => {
                    notification.style.animation = 'fadeOut 0.5s ease-out';
                    setTimeout(() => notification.remove(), 500);
                }, 2500);
            }
            
            // Funciones auxiliares
            function closeModal(modal) {
                modal.style.display = 'none';
            }
            
            // Event listeners
            addCategoryBtn.addEventListener('click', function() {
                openCategoryModal();
            });
            
            saveCategoryBtn.addEventListener('click', saveCategory);
            cancelCategoryBtn.addEventListener('click', function() {
                closeModal(categoryModal);
            });
            
            saveProductBtn.addEventListener('click', saveProduct);
            cancelProductBtn.addEventListener('click', function() {
                closeModal(productModal);
            });
            
            productImageInput.addEventListener('change', function(e) {
                const file = e.target.files[0];
                if (file) {
                    const reader = new FileReader();
                    reader.onload = function(event) {
                        productImagePreview.src = event.target.result;
                        productImagePreview.style.display = 'block';
                    };
                    reader.readAsDataURL(file);
                }
            });
            
            cartButton.addEventListener('click', function() {
                cartSidebar.classList.add('open');
            });
            
            closeCart.addEventListener('click', function() {
                cartSidebar.classList.remove('open');
            });
            
            checkoutBtn.addEventListener('click', function() {
                if (cart.length === 0) {
                    alert('Tu carrito está vacío');
                    return;
                }
                
                const total = cart.reduce((sum, item) => sum + (item.price * item.quantity), 0);
                alert(`¡Gracias por tu compra!\n\nTotal: $${total.toLocaleString()}\n\nRedirigiendo a WhatsApp para finalizar.`);
                
                // Aquí podrías redirigir a WhatsApp con un mensaje con los detalles del pedido
                // window.location.href = `https://wa.me/5492236948462?text=${encodeURIComponent(pedido)}`;
                
                // Limpiar carrito después de la compra
                cart = [];
                saveData();
                renderCart();
                cartSidebar.classList.remove('open');
            });
            
            // Menú móvil
            const menuToggle = document.getElementById('mobile-menu-toggle');
            const menu = document.getElementById('main-menu');
            const header = document.getElementById('header');
            
            function toggleMenu() {
                menu.classList.toggle('show');
            }
            
            menuToggle.addEventListener('click', toggleMenu);
            
            // Efecto de scroll en el header
            window.addEventListener('scroll', function() {
                if (window.scrollY > 50) {
                    header.classList.add('scrolled');
                } else {
                    header.classList.remove('scrolled');
                }
            });
            
            function checkScreenSize() {
                if (window.innerWidth <= 768) {
                    menuToggle.style.display = 'block';
                    menu.style.display = 'none';
                } else {
                    menuToggle.style.display = 'none';
                    menu.style.display = 'flex';
                    menu.classList.remove('show');
                }
            }
            
            window.addEventListener('resize', checkScreenSize);
            checkScreenSize();
            
            // Cierra el menú al hacer clic en un enlace
            document.querySelectorAll('.tt-menu-nav a').forEach(link => {
                link.addEventListener('click', function() {
                    if (window.innerWidth <= 768) {
                        menu.classList.remove('show');
                    }
                });
            });
            
            // Cerrar modales haciendo clic fuera del contenido
            window.addEventListener('click', function(event) {
                if (event.target === categoryModal) {
                    closeModal(categoryModal);
                }
                if (event.target === productModal) {
                    closeModal(productModal);
                }
            });
            
            // Inicializar
            renderTienda();
            renderCart();
            updateCartCount();
            
            // Agregar animación para las notificaciones
            const style = document.createElement('style');
            style.textContent = `
                @keyframes fadeInOut {
                    0% { opacity: 0; transform: translateY(20px); }
                    10% { opacity: 1; transform: translateY(0); }
                    90% { opacity: 1; transform: translateY(0); }
                    100% { opacity: 0; transform: translateY(20px); }
                }
                @keyframes fadeOut {
                    from { opacity: 1; }
                    to { opacity: 0; }
                }
            `;
            document.head.appendChild(style);
        });
    </script>
</body>
</html>